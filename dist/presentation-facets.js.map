{"version":3,"sources":["webpack://presentation-facets/webpack/universalModuleDefinition","webpack://presentation-facets/webpack/bootstrap","webpack://presentation-facets/external {\"commonjs\":\"presentation-dom\",\"commonjs2\":\"presentation-dom\",\"amd\":\"presentation-dom\",\"root\":\"presentation-dom\"}","webpack://presentation-facets/external {\"commonjs\":\"presentation-decorator\",\"commonjs2\":\"presentation-decorator\",\"amd\":\"presentation-decorator\",\"root\":\"presentation-decorator\"}","webpack://presentation-facets/./src/schemas/facet.js","webpack://presentation-facets/./src/models/facet.js","webpack://presentation-facets/./src/constants.js","webpack://presentation-facets/./src/functions.js","webpack://presentation-facets/./src/facetView.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Schema","Facet","Model","constructor","attributes","options","args","schema","super","createCheckboxes","viewName","field","group","html","length","renderNumStars","num","stars","Number","createStars","createColors","color","createSizes","createImages","image","createPrices","range","FacetView","DirectiveView","style","_facets","facets","title","_button","addFacet","identifier","data","type","push","template","button","toLowerCase","e","console","error","createTemplate","_title","render","syncAllBoundElements","delegateEvents","remove","submit","preventDefault","json","formData","FormData","Dom","selector","Error","forEach","Array","isArray","arr","JSON","stringify","collapse","id","target","getAttribute","toggleClass","facet","toggle","hide","myEl","el","classList","add","warn"],"mappings":"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","file":"presentation-facets.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"presentation-dom\"), require(\"presentation-decorator\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"presentation-facets\", [\"presentation-dom\", \"presentation-decorator\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"presentation-facets\"] = factory(require(\"presentation-dom\"), require(\"presentation-decorator\"));\n\telse\n\t\troot[\"presentation-facets\"] = factory(root[\"presentation-dom\"], root[\"presentation-decorator\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","const Schema = {\n  \"$schema\": \"http://json-schema.org/draft-04/schema#\",\n  \"title\": \"Facet\",\n  \"description\": \"A Facet\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"identifier\": {\n      \"description\": \"An identifier for the facet\",\n      \"type\" : \"string\"\n    },\n    \"name\": {\n      \"description\": \"A name of the facet\",\n      \"type\" : \"string\"\n    },\n    \"data\": {\n      \"description\": \"Sets of data\",\n      \"type\" : \"array\",\n      \"minItems\": 1\n    },\n    \"type\": {\n      \"description\": \"The visual style\",\n      \"type\" : \"string\",\n      \"enum\": [\"check\", \"star\", \"color\", \"size\", \"image\", \"price\"]\n    },\n    \"range\": {\n      \"description\": \"A range entry\",\n      \"type\" : \"boolean\"\n    }\n  }\n};\n\nexport default Schema;\n","import { Model } from \"presentation-models\";\nimport Schema from \"../schemas/facet.js\";\n\nclass Facet extends Model {\n  constructor(attributes, options, ...args) {\n    if (!options) {\n      options = {};\n    }\n    options.schema = Schema;\n    super(attributes, options, args);\n  };\n\n  get identifier() {\n    return this.get(\"identifier\");\n  };\n\n  get name() {\n    return this.get(\"name\");\n  };\n\n  get data() {\n    return this.get(\"data\");\n  };\n\n  get type() {\n    return this.get(\"type\");\n  };\n};\n\nexport default Facet;\n","export const FACET_FORM_ID = \"_facetForm\";\nexport const DEFAULT_STYLE = \"facets\";\n","import { FACET_FORM_ID, DEFAULT_STYLE } from \"./constants.js\";\n\nconst createCheckboxes = (viewName, field, group) => {\n  let html = \"\", i = 0;\n  const l = (field.length) ? (field.length) : 0;\n  for (i = 0; i < l; i++) {\n    html +=\n     `<label><input type=\"checkbox\" value=\"${field[i].value}\" data-function=\"facet\" name=\"${group}\" />${field[i].name}</label>`;\n  }\n  return html;\n};\n\nconst renderNumStars = (num) => {\n  let i = 0,\n      stars = `<i class=\"material-icons\">`;\n      const l = Number(num);\n  for(i; i < 5; i++) {\n    if (i < l) {\n      stars += \"star \";\n    } else {\n      stars += \"star_border \";\n    }\n  }\n  stars += \"</i>\";\n  return stars;\n};\n\nconst createStars = (viewName, field, group) => {\n  let html = \"\", i = 0;\n  const l = (field.length) ? (field.length) : 0;\n  for (i = 0; i < l; i++) {\n    html +=\n     `<label><input type=\"checkbox\" value=\"${field[i].value}\" data-function=\"facet\" name=\"${group}\" />${renderNumStars(field[i].name)}</label>`;\n  }\n  return html;\n};\n\nconst createColors = (viewName, field, group) => {\n  let html = \"\", i = 0;\n  const l = (field.length) ? (field.length) : 0;\n  for (i = 0; i < l; i++) {\n    html +=\n     `<label><input type=\"checkbox\" value=\"${field[i].value}\" data-function=\"facet\" name=\"${group}\"/><div style=\"background-color: ${field[i].color};\" class=\"colorway\"></div>${field[i].name}</label>`;\n  }\n  return html;\n};\n\nconst createSizes = (viewName, field, group) => {\n  let html = \"\", i = 0;\n  const l = (field.length) ? (field.length) : 0;\n  for (i = 0; i < l; i++) {\n    html +=\n     `<label><input type=\"checkbox\" value=\"${field[i].value}\" data-function=\"facet\" name=\"${group}\"/><div class=\"size\">${field[i].name}</div></label>`;\n  }\n  return html;\n};\n\nconst createImages = (viewName, field, group) => {\n  let html = \"\", i = 0;\n  const l = (field.length) ? (field.length) : 0;\n  for (i = 0; i < l; i++) {\n    html += `<label><input type=\"checkbox\" value=\"${field[i].value}\" data-function=\"facet\" name=\"${group}\"/><figure class=\"image\"><img src=\"${field[i].image}\"/></figure></label>`;\n  }\n  return html;\n};\n\nconst createPrices = (viewName, field, group, range) => {\n  let html = createCheckboxes(viewName, field, group);\n  if (range) {\n    html +=\n     `<label class=\"range\">Min<input type=\"text\" name=\"${group}-min\"/></label><label class=\"range\">Max<input type=\"text\" name=\"${group}-max\"/></label>`;\n  }\n  return html;\n};\n\nexport const createTemplate = (viewName, facets, title, button) => {\n  try {\n    const l = facets.length;\n    let i = 0, template = `<div class=\"${DEFAULT_STYLE}\">${(title) ? \"<h1>\" + title + \"</h1>\": \"\"}<form id=\"${FACET_FORM_ID}\">`;\n    for (i; i < l; i++) {\n      // TODO: support 'type'\n      template +=\n       `<h2 data-${viewName}=\"${facets[i].identifier}\" data-click=\"collapse\" class=\"toggle collapse\">${facets[i].name}</h2><div id=\"${facets[i].identifier}\" class=\"toggle collapse\">`;\n      if (facets[i].type === \"star\") {\n        template += createStars(viewName, facets[i].data, facets[i].identifier);\n      } else if (facets[i].type === \"color\") {\n        template += createColors(viewName, facets[i].data, facets[i].identifier);\n      } else if (facets[i].type === \"size\") {\n        template += createSizes(viewName, facets[i].data, facets[i].identifier);\n      } else if (facets[i].type === \"image\") {\n        template += createImages(viewName, facets[i].data, facets[i].identifier);\n      } else if (facets[i].type === \"price\") {\n        template += createPrices(viewName, facets[i].data, facets[i].identifier, facets[i].range);\n      } else {\n        template += createCheckboxes(viewName, facets[i].data, facets[i].identifier);\n      }\n      template += `</div>`;\n    }\n    if (button) {\n      template += `<button type=\"submit\" data-${viewName}=\"${button.toLowerCase()}\" data-click=\"submit\">${button}</button>`;\n    }\n    template += `</form></div>`;\n    return template;\n  } catch (e) {\n    console.error(e);\n    return null;\n  }\n};\n","import { DirectiveView } from \"presentation-decorator\";\nimport { Dom } from \"presentation-dom\";\nimport Facet from \"./models/facet.js\";\n\nimport { createTemplate } from \"./functions.js\";\nimport { FACET_FORM_ID, DEFAULT_STYLE } from \"./constants.js\";\n\n/**\n * Simple selection facet view\n * @extends DirectiveView\n */\nclass FacetView extends DirectiveView {\n  constructor(options = {}) {\n    if (options.style) {\n      options.style += ` ${DEFAULT_STYLE}`;\n    } else {\n      options.style = DEFAULT_STYLE;\n    }\n    super(options);\n    this._facets = (options.facets) ? options.facets : [];\n    this.title = (options.title) ? options.title : null;\n    this._button = (options._button) ? options._button : null;\n  };\n\n  /**\n   * Add a filter to render\n   * @param {string} identifier ID of the group\n   * @param {string} name Name of the group\n   * @param {Array} data Array of objects { name: value } of the selections\n   * @param {string} type A facet type (defaults to check)\n   */\n  addFacet(identifier, name, data, type) {\n    if (identifier && name && data) {\n      return this._facets.push(new Facet({\n        \"identifier\": identifier,\n        \"name\": name,\n        \"data\": data,\n        \"type\": type\n      }));\n    }\n    return this._facets.length;\n  };\n\n  /**\n   * Raw data of the filter data passed rendered\n   * @property {Array} facets\n   */\n  get facets() {\n    return this._facets;\n  };\n\n  set facets(facets) {\n    if (facets) {\n      this._facets = facets;\n    } else {\n      this._facets = [];\n    }\n  };\n\n  /**\n   * Render the view\n   */\n  async render() {\n    this.template = await createTemplate(this.name, this._facets, this._title, this._button);\n    await super.render();\n    await this.syncAllBoundElements();\n    await this.delegateEvents();\n    return this;\n  };\n\n  /**\n   * Remove the view\n   */\n  remove() {\n    return super.remove();\n  };\n\n  /**\n   * Submit the selections\n   */\n  submit(e) {\n    e.preventDefault();\n    return this;\n  };\n\n  /**\n   * @property {Object} selections\n   * @returns {Object} Returns an object of keys and values of selections from the facets\n   */\n  get selections() {\n    let json = {};\n    try {\n      const formData = new FormData(Dom.selector(`#${FACET_FORM_ID}`));\n      if (formData) {\n        const object = {};\n        formData.forEach((value, key) => {\n          if (object[key]) {\n            if (Array.isArray(object[key])) {\n              object[key].push(value);\n            } else {\n              const arr = [];\n              arr.push(object[key]);\n              arr.push(value);\n              object[key] = arr;\n            }\n          } else {\n            object[key] = value;\n          }\n        });\n        json = JSON.stringify(object);\n      } else {\n        throw new Error(`Could not read facet form for id ${FACET_FORM_ID}.`);\n      }\n    } catch(e) {\n      console.error(e);\n    }\n    return json;\n  };\n\n  collapse(e) {\n    const id = e.target.getAttribute(`data-${this.name}`);\n    const el = Dom.toggleClass(`#${id}`, \"collapse\");\n    Dom.toggleClass(e.target, \"collapse\");\n    //console.debug(`Toggle - ${el} id: ${id}`);\n  };\n\n  facet(e) {\n    //console.debug(\"Filter was changed - submit\");\n    this.submit(e);\n  };\n\n  toggle(hide) {\n    //alert(\"hide \" + hide + \" el \" + this.el);\n    if (hide) {\n      const myEl = Dom.selector(this.el);\n      if (myEl) {\n        myEl.classList.add(\"hide\");\n      } else {\n        console.warn(\"El for facet did not select.\");\n      }\n    } else {\n      const myEl = Dom.selector(this.el);\n      if (myEl) {\n        myEl.classList.remove(\"hide\");\n      } else {\n        console.warn(\"El for facet did not select.\");\n      }\n    }\n  };\n};\n\nexport default FacetView;\n"],"sourceRoot":""}