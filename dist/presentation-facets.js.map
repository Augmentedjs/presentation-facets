{"version":3,"sources":["webpack://presentation-facets/webpack/universalModuleDefinition","webpack://presentation-facets/webpack/bootstrap","webpack://presentation-facets/./src/facetView.js","webpack://presentation-facets/./src/functions.js","webpack://presentation-facets/./src/index.js","webpack://presentation-facets/external {\"commonjs\":\"presentation-decorator\",\"commonjs2\":\"presentation-decorator\",\"amd\":\"presentation-decorator\",\"root\":\"presentation-decorator\"}","webpack://presentation-facets/external {\"commonjs\":\"presentation-dom\",\"commonjs2\":\"presentation-dom\",\"amd\":\"presentation-dom\",\"root\":\"presentation-dom\"}"],"names":["MOUNT_POINT","FILTER_FORM_ID","Logger","DirectiveView","constructor","render","remove","submit","e","formData","document","object","Array","arr","json","JSON","collapse","id","name","el","Dom","filter","toggle","alert","myEl","FacetView","STATUS","FIELDS","createCheckboxes","html","i","l","field","viewName","value","group","createTemplate","Promise","view","template","projectCheck","venderCheck","module"],"mappings":"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","file":"presentation-facets.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"presentation-decorator\"), require(\"presentation-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"presentation-facets\", [\"presentation-decorator\", \"presentation-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"presentation-facets\"] = factory(require(\"presentation-decorator\"), require(\"presentation-dom\"));\n\telse\n\t\troot[\"presentation-facets\"] = factory(root[\"presentation-decorator\"], root[\"presentation-dom\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_presentation_decorator__, __WEBPACK_EXTERNAL_MODULE_presentation_dom__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import { DirectiveView } from \"presentation-decorator\";\n//import Logger from \"../logger/logger.js\";\nimport Dom from \"presentation-dom\";\n//import { FETCH_ASSETS } from \"../constants/messages.js\";\n// collections, should not be here\n//import Vendors from \"../collections/vendors.js\";\n//import Projects from \"../collections/projects.js\";\n\nimport { createCheckboxes, createTemplate } from \"./functions.js\";\n\nconst MOUNT_POINT = \"#filters\";\nconst FILTER_FORM_ID = \"filterForm\";\n\nconst Logger = console;\n\nclass FacetView extends DirectiveView {\n  constructor() {\n    super({\n      \"el\": MOUNT_POINT,\n      \"name\": \"filters\",\n      \"style\": \"view\"\n    });\n    // data collections (should not be here)\n    //this.vendors = new Vendors();\n    //this.projects = new Projects();\n  };\n\n  render() {\n    createTemplate(this);\n    return super.render();\n  };\n\n  remove() {\n    // data collections (should not be here)\n    //this.vendors = null;\n    //this.projects = null;\n    return super.remove();\n  };\n\n  submit(e) {\n    e.preventDefault();\n    const formData = new FormData(document.querySelector(`#${FILTER_FORM_ID}`));\n    const object = {};\n    formData.forEach((value, key) => {\n      if (object[key]) {\n        if (Array.isArray(object[key])) {\n          object[key].push(value);\n        } else {\n          const arr = [];\n          arr.push(object[key]);\n          arr.push(value);\n          object[key] = arr;\n        }\n      } else {\n        object[key] = value;\n      }\n    });\n    const json = JSON.stringify(object);\n    Logger.debug(\"form:\" + json);\n    //this.sendMessage(FETCH_ASSETS, json);\n  };\n\n  collapse(e) {\n    const id = e.target.getAttribute(`data-${this.name}`);\n    const el = Dom.toggleClass(`#${id}`, \"collapse\");\n    Dom.toggleClass(e.target, \"collapse\");\n    Logger.debug(`Toggle - ${el} id: ${id}`);\n  };\n\n  filter(e) {\n    Logger.debug(\"Filter was changed - submit\");\n    this.submit(e);\n  };\n\n  toggle(hide) {\n    alert(\"hide \" + hide + \" el \" + this.el);\n    if (hide) {\n      const myEl = Dom.selector(this.el);\n      if (myEl) {\n        myEl.classList.add(\"hide\");\n      } else {\n        Logger.warn(\"El did not select\");\n      }\n    } else {\n      const myEl = Dom.selector(this.el);\n      if (myEl) {\n        myEl.classList.remove(\"hide\");\n      } else {\n        Logger.warn(\"El did not select\");\n      }\n    }\n  };\n};\n\nexport default FacetView;\n","// this is data, should not be here\nconst STATUS = [\n  { \"name\": \"Ordered\", \"value\": \"ordered\" },\n  { \"name\": \"Shipped\", \"value\": \"shipped\" }\n];\n\nconst FIELDS = {\n  \"ASSETS\": { \"name\": \"Assets\", \"id\": \"assets\" },\n  \"CONTRACTS\": { \"name\": \"Contracts\", \"id\": \"contracts\" },\n  \"SEARCH\": { \"name\": \"Search\", \"id\": \"search\" },\n  \"VENDOR\": { \"name\": \"Vendors\", \"id\": \"vendor\" },\n  \"LOCATIONS\": { \"name\": \"Locations\", \"id\": \"locations\" },\n  \"PROJECT\": { \"name\": \"Projects\", \"id\": \"project\" },\n  \"STATUS\": { \"name\": \"Status\", \"id\": \"status\" }\n};\n// ---\n\nexport const createCheckboxes = (viewName, field, group) => {\n  let html = \"\", i = 0;\n  const l = (field.length) ? (field.length) : 0;\n  for (i = 0; i < l; i++) {\n    html += `<label><input type=\"checkbox\" data-${viewName}=\"${field[i].name}\" value=\"${field[i].value}\" data-function=\"filter\" name=\"${group}\" />${field[i].name}</label>`;\n  }\n  return html;\n};\n\nexport const createTemplate = async (view) => {\n  try {\n    await Promise.all([\n      view.vendors.fetch(),\n      //view.locations.fetch(),\n      view.projects.fetch()\n    ]);\n\n    const [vendors, projects] = await Promise.all([\n      view.vendors.toJSON(),\n      //view.locations.toJSON(),\n      view.projects.toJSON()\n    ]);\n\n    const [venderCheck, projectCheck] = await Promise.all([\n      createCheckboxes(view.name, vendors, FIELDS.VENDOR.id),\n      //createCheckboxes(view.name, locations, FIELDS.LOCATIONS.id),\n      createCheckboxes(view.name, projects, FIELDS.PROJECT.id)\n    ]);\n\n    const template = `\n      <div class=\"content\">\n        <h1></h1>\n        <form id=\"${FILTER_FORM_ID}\">\n          <h2 data-${view.name}=\"${FIELDS.ASSETS.id}\" data-click=\"collapse\" class=\"toggle collapse\">${FIELDS.ASSETS.name}</h2>\n          <div id=\"${FIELDS.ASSETS.id}\" class=\"toggle collapse\">\n            -\n          </div>\n          <hr/>\n          <h2 data-${view.name}=\"${FIELDS.PROJECT.id}\" data-click=\"collapse\" class=\"toggle collapse\">${FIELDS.PROJECT.name}</h2>\n          <div id=\"${FIELDS.PROJECT.id}\" class=\"toggle collapse\">\n            ${projectCheck}\n          </div>\n          <hr/>\n          <h2 data-${view.name}=\"${FIELDS.CONTRACTS.id}\" data-click=\"collapse\" class=\"toggle collapse\">${FIELDS.CONTRACTS.name}</h2>\n          <div id=\"${FIELDS.CONTRACTS.id}\" class=\"toggle collapse\">\n            -\n          </div>\n          <hr/>\n          <h2 data-${view.name}=\"${FIELDS.VENDOR.id}\" data-click=\"collapse\" class=\"toggle collapse\">${FIELDS.VENDOR.name}</h2>\n          <div id=\"${FIELDS.VENDOR.id}\" class=\"toggle collapse\">\n            ${venderCheck}\n          </div>\n          <hr/>\n          <h2 data-${view.name}=\"${FIELDS.LOCATIONS.id}\" data-click=\"collapse\" class=\"toggle collapse\">${FIELDS.LOCATIONS.name}</h2>\n          <div id=\"${FIELDS.LOCATIONS.id}\" class=\"toggle collapse\">\n            -\n          </div>\n          <button type=\"submit\" data-${view.name}=\"submit\" data-click=\"submit\">Filter</button>\n        </form>\n      </div>\n    `;\n\n    await view.injectTemplate(template);\n\n    await Promise.all([\n      view.syncBoundElement(FIELDS.ASSETS.id),\n      view.syncBoundElement(FIELDS.PROJECT.id),\n      view.syncBoundElement(FIELDS.CONTRACTS.id),\n      view.syncBoundElement(FIELDS.VENDOR.id),\n      view.syncBoundElement(FIELDS.LOCATIONS.id)\n    ]);\n\n    return true;\n  } catch (e) {\n    Logger.error(e);\n    await view.injectTemplate(`Failed - ${e}`);\n    return e;\n  }\n};\n","import FacetView from \"./facetView.js\";\n\nmodule.exports = FacetView;\n","module.exports = __WEBPACK_EXTERNAL_MODULE_presentation_decorator__;","module.exports = __WEBPACK_EXTERNAL_MODULE_presentation_dom__;"],"sourceRoot":""}