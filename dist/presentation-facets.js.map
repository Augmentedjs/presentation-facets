{"version":3,"sources":["webpack://presentation-facets/webpack/universalModuleDefinition","webpack://presentation-facets/webpack/bootstrap","webpack://presentation-facets/./src/index.js","webpack://presentation-facets/./src/facetView.js","webpack://presentation-facets/external {\"commonjs\":\"presentation-decorator\",\"commonjs2\":\"presentation-decorator\",\"amd\":\"presentation-decorator\",\"root\":\"presentation-decorator\"}","webpack://presentation-facets/external {\"commonjs\":\"presentation-dom\",\"commonjs2\":\"presentation-dom\",\"amd\":\"presentation-dom\",\"root\":\"presentation-dom\"}","webpack://presentation-facets/./src/functions.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_facetView","FacetView","_presentationDecorator","_presentationDom","_functions","FILTER_FORM_ID","Logger","console","DirectiveView","constructor","options","super","_filters","addFilter","id","collection","push","render","createTemplate","remove","submit","e","formData","FormData","document","Array","arr","json","JSON","collapse","el","Dom","filter","toggle","hide","myEl","FIELDS","createCheckboxes","viewName","field","group","html","length","view","filters","template","_ref","_x","apply","arguments"],"mappings":"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","file":"presentation-facets.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"presentation-decorator\"), require(\"presentation-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"presentation-facets\", [\"presentation-decorator\", \"presentation-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"presentation-facets\"] = factory(require(\"presentation-decorator\"), require(\"presentation-dom\"));\n\telse\n\t\troot[\"presentation-facets\"] = factory(root[\"presentation-decorator\"], root[\"presentation-dom\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__3__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import FacetView from \"./facetView.js\";\n\nmodule.exports = FacetView;\n","import { DirectiveView } from \"presentation-decorator\";\nimport Dom from \"presentation-dom\";\n\nimport { createTemplate } from \"./functions.js\";\n\nconst FILTER_FORM_ID = \"filterForm\";\nconst Logger = console;\n\nclass FacetView extends DirectiveView {\n  constructor(options) {\n    super(options);\n    this._filters = [];\n  };\n\n  addFilter(id, name, collection) {\n    this._filters.push({ \"id\": id, \"name\": name, \"collection\": collection });\n  };\n\n  render() {\n    createTemplate(this);\n    return super.render();\n  };\n\n  remove() {\n    return super.remove();\n  };\n\n  submit(e) {\n    e.preventDefault();\n    const formData = new FormData(document.querySelector(`#${FILTER_FORM_ID}`));\n    const object = {};\n    formData.forEach((value, key) => {\n      if (object[key]) {\n        if (Array.isArray(object[key])) {\n          object[key].push(value);\n        } else {\n          const arr = [];\n          arr.push(object[key]);\n          arr.push(value);\n          object[key] = arr;\n        }\n      } else {\n        object[key] = value;\n      }\n    });\n    const json = JSON.stringify(object);\n    Logger.debug(\"form:\" + json);\n    //this.sendMessage(FETCH_ASSETS, json);\n  };\n\n  collapse(e) {\n    const id = e.target.getAttribute(`data-${this.name}`);\n    const el = Dom.toggleClass(`#${id}`, \"collapse\");\n    Dom.toggleClass(e.target, \"collapse\");\n    Logger.debug(`Toggle - ${el} id: ${id}`);\n  };\n\n  filter(e) {\n    Logger.debug(\"Filter was changed - submit\");\n    this.submit(e);\n  };\n\n  toggle(hide) {\n    //alert(\"hide \" + hide + \" el \" + this.el);\n    if (hide) {\n      const myEl = Dom.selector(this.el);\n      if (myEl) {\n        myEl.classList.add(\"hide\");\n      } else {\n        Logger.warn(\"El did not select\");\n      }\n    } else {\n      const myEl = Dom.selector(this.el);\n      if (myEl) {\n        myEl.classList.remove(\"hide\");\n      } else {\n        Logger.warn(\"El did not select\");\n      }\n    }\n  };\n};\n\nexport default FacetView;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","// this is data, should not be here\nconst STATUS = [\n  { \"name\": \"Ordered\", \"value\": \"ordered\" },\n  { \"name\": \"Shipped\", \"value\": \"shipped\" }\n];\n\nconst FIELDS = {\n  \"ASSETS\": { \"name\": \"Assets\", \"id\": \"assets\" },\n  \"CONTRACTS\": { \"name\": \"Contracts\", \"id\": \"contracts\" },\n  \"SEARCH\": { \"name\": \"Search\", \"id\": \"search\" },\n  \"VENDOR\": { \"name\": \"Vendors\", \"id\": \"vendor\" },\n  \"LOCATIONS\": { \"name\": \"Locations\", \"id\": \"locations\" },\n  \"PROJECT\": { \"name\": \"Projects\", \"id\": \"project\" },\n  \"STATUS\": { \"name\": \"Status\", \"id\": \"status\" }\n};\n// ---\n\nexport const createCheckboxes = (viewName, field, group) => {\n  let html = \"\", i = 0;\n  const l = (field.length) ? (field.length) : 0;\n  for (i = 0; i < l; i++) {\n    html += `<label><input type=\"checkbox\" data-${viewName}=\"${field[i].name}\" value=\"${field[i].value}\" data-function=\"filter\" name=\"${group}\" />${field[i].name}</label>`;\n  }\n  return html;\n};\n\nexport const createTemplate = async (view) => {\n  try {\n    /*await Promise.all([\n      view.vendors.fetch(),\n      //view.locations.fetch(),\n      view.projects.fetch()\n    ]);\n    const [vendors, projects] = await Promise.all([\n      view.vendors.toJSON(),\n      //view.locations.toJSON(),\n      view.projects.toJSON()\n    ]);\n    */\n    const filters = view._filters;\n    const l = filters.length;\n    let i = 0, template = `<div class=\"content\"><h1></h1><form id=\"${FILTER_FORM_ID}\">`;\n    for (i; i < l; i++) {\n      template += `\n        <h2 data-${view.name}=\"${filters[i].id}\" data-click=\"collapse\" class=\"toggle collapse\">${filters[i].name}</h2>\n        <div id=\"${FIELDS.PROJECT.id}\" class=\"toggle collapse\">\n          ${createCheckboxes(filters[i].name, filters[i].collection, filters[i].id)}\n        </div>\n      `;\n    }\n    template += `<button type=\"submit\" data-${view.name}=\"submit\" data-click=\"submit\">Filter</button></form></div>`;\n    /*\n    const [venderCheck, projectCheck] = await Promise.all([\n      createCheckboxes(view.name, vendors, FIELDS.VENDOR.id),\n      //createCheckboxes(view.name, locations, FIELDS.LOCATIONS.id),\n      createCheckboxes(view.name, projects, FIELDS.PROJECT.id)\n    ]);\n    */\n    /*\n    const template = `\n      <div class=\"content\">\n        <h1></h1>\n        <form id=\"${FILTER_FORM_ID}\">\n          <h2 data-${view.name}=\"${FIELDS.ASSETS.id}\" data-click=\"collapse\" class=\"toggle collapse\">${FIELDS.ASSETS.name}</h2>\n          <div id=\"${FIELDS.ASSETS.id}\" class=\"toggle collapse\">\n            -\n          </div>\n          <hr/>\n          <h2 data-${view.name}=\"${FIELDS.PROJECT.id}\" data-click=\"collapse\" class=\"toggle collapse\">${FIELDS.PROJECT.name}</h2>\n          <div id=\"${FIELDS.PROJECT.id}\" class=\"toggle collapse\">\n            ${projectCheck}\n          </div>\n          <hr/>\n          <h2 data-${view.name}=\"${FIELDS.CONTRACTS.id}\" data-click=\"collapse\" class=\"toggle collapse\">${FIELDS.CONTRACTS.name}</h2>\n          <div id=\"${FIELDS.CONTRACTS.id}\" class=\"toggle collapse\">\n            -\n          </div>\n          <hr/>\n          <h2 data-${view.name}=\"${FIELDS.VENDOR.id}\" data-click=\"collapse\" class=\"toggle collapse\">${FIELDS.VENDOR.name}</h2>\n          <div id=\"${FIELDS.VENDOR.id}\" class=\"toggle collapse\">\n            ${venderCheck}\n          </div>\n          <hr/>\n          <h2 data-${view.name}=\"${FIELDS.LOCATIONS.id}\" data-click=\"collapse\" class=\"toggle collapse\">${FIELDS.LOCATIONS.name}</h2>\n          <div id=\"${FIELDS.LOCATIONS.id}\" class=\"toggle collapse\">\n            -\n          </div>\n          <button type=\"submit\" data-${view.name}=\"submit\" data-click=\"submit\">Filter</button>\n        </form>\n      </div>\n    `;\n\n    await view.injectTemplate(template);\n\n    await Promise.all([\n      view.syncBoundElement(FIELDS.ASSETS.id),\n      view.syncBoundElement(FIELDS.PROJECT.id),\n      view.syncBoundElement(FIELDS.CONTRACTS.id),\n      view.syncBoundElement(FIELDS.VENDOR.id),\n      view.syncBoundElement(FIELDS.LOCATIONS.id)\n    ]);\n    */\n    return template;\n  } catch (e) {\n    Logger.error(e);\n    //await view.injectTemplate(`Failed - ${e}`);\n    return null;\n  }\n};\n"],"sourceRoot":""}